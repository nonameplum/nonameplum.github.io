<!DOCTYPE html><html lang="en"><head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J4P81SMT9Y"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-J4P81SMT9Y');
</script><meta charset="UTF-8"/><meta name="og:site_name" content="≈Åukasz ≈öliwi≈Ñski"/><link rel="canonical" href="https://nonameplum.github.io/posts/ESPHome%20custom%20component%20vs%20component%20(contribution)%20development"/><meta name="twitter:url" content="https://nonameplum.github.io/posts/ESPHome%20custom%20component%20vs%20component%20(contribution)%20development"/><meta name="og:url" content="https://nonameplum.github.io/posts/ESPHome%20custom%20component%20vs%20component%20(contribution)%20development"/><title>Difference of development between custom component and full-fledged component for ESPHome | ≈Åukasz ≈öliwi≈Ñski</title><meta name="twitter:title" content="Difference of development between custom component and full-fledged component for ESPHome | ≈Åukasz ≈öliwi≈Ñski"/><meta name="og:title" content="Difference of development between custom component and full-fledged component for ESPHome | ≈Åukasz ≈öliwi≈Ñski"/><meta name="description" content="ESPHome custom component vs component (contribution) development"/><meta name="twitter:description" content="ESPHome custom component vs component (contribution) development"/><meta name="og:description" content="ESPHome custom component vs component (contribution) development"/><meta http-equiv="cache-control" content="no-cache"/><meta http-equiv="expires" content="no-cache"/><meta http-equiv="pragma" content="no-cache"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="/code.css" type="text/css"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Comfortaa"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to ≈Åukasz ≈öliwi≈Ñski"/></head><body class="item-page"><header><div class="wrapper"><div class="title"><a class="site-logo" href="/">üì±</a><a class="site-name" href="/">≈Åukasz ≈öliwi≈Ñski</a><a class="site-subname" href="/">Software Developer Blog</a></div><div class="avatar-wrapper"><a class="fa-brands fa-twitter" href="https://twitter.com/sliwinskilukas"></a><a class="fa-brands fa-linkedin" href="https://www.linkedin.com/in/≈Çukasz-≈õliwi≈Ñski-01b48a12a"></a><a class="avatar-link" href="https://github.com/nonameplum"><img src="https://avatars.githubusercontent.com/u/1753816?v=4" class="avatar"/></a></div></div></header><div class="wrapper"><article><div class="content"><h1>Difference of development between custom component and full-fledged component for ESPHome</h1><p>There are two approaches that can be used to develop a custom component for <a href="https://esphome.io/">ESPHome</a>: 1. A simplified version described in the ESPHome documentation (<a href="https://esphome.io/components/sensor/custom.html">Custom Sensor Compoent</a> and <a href="https://esphome.io/custom/custom_component.html">Generic Custom Component</a>) 2. Native - "full-fledged" component that you can find e.g. <a href="https://github.com/esphome/esphome/tree/dev/esphome/components">ESPHome Build-in Components</a> and its creation is described in the <a href="https://esphome.io/guides/contributing.html">Contribution Guide</a></p><p>For better communication to distinguish components, I will call the former <em>Simple</em> and the latter <em>Native</em>.</p><p>The main difference between the two is that <em>Native</em> implementation provides better reusability, as you can use <a href="https://esphome.io/components/external_components.html"><code>external_components</code></a> feature to point to the local or remote (github) location in your <code>.yaml</code> device configuration to simply use some additional components except the build-in into ESPHome. Additionally <em>Native</em> component has more advantages over the component configuration validation thanks to Python and configuration schemes.</p><p>The <em>Simple</em> component development is quite well described in the ESPHome documentation. In a nutshell, it just requires creating the <code>.h</code> + optionally <code>.cpp</code> file with the C++ (Arduino) component implementation and then the <code>yaml</code> file that registers the component so it can be used as any other ESPHome component. All that is clearly explained in the above documentation references.</p><p>In the case of the <em>Native</em> component development, this gets more tricky. The contribution guide sheds a bit of light on how to start but without many details. The most tricky part is how to properly write the <code>__init__</code> and/or<code>sensor.py</code> which defines the component, validation, and C++ code generation (more details in the contribution guide). Most of the time it requires checking other component's implementations and based on that conclude what is actually needed. It's not that hard but requires a bit of Python knowledge. The C++ part is not that much different than the <em>Simple</em> component implementation. If you already have <em>Simple</em> implementation it can be copy/pasted, add <code>namespace esphome</code>, another inner for the component, and you are good to go.</p><p>If you would like to understand better the difference between the <em>Simple</em> and <em>Native</em> component implementation take a look at my <a href="https://github.com/nonameplum/esphome_devices">repository</a>. I implemented the same sensor using both approaches. You can find the <em>Simple</em> component implementation in <a href="https://github.com/nonameplum/esphome_devices/tree/main/custom_components/mq9">custom_components/mq9</a> and <em>Native</em> in <a href="https://github.com/nonameplum/esphome_devices/tree/main/components/mq">components/mq</a>. Also, the example of how to use it is defined in <a href="https://github.com/nonameplum/esphome_devices/blob/main/mq9_test.yaml">mq9_test.yaml</a></p><p>The <em>Native</em> component is loaded thanks to the <code>external_components</code> definition in <a href="https://github.com/nonameplum/esphome_devices/blob/main/common/config_base.yaml">config_base.yaml</a>.</p><p>To switch between the <em>Native</em> and <em>Simple</em> component usage uncomment the line that defines <code>mq9_base</code> in the <a href="https://github.com/nonameplum/esphome_devices/blob/41d024326db55ef2ee7b357bd58dabdbc18f53c1/mq9_test.yaml#L18">mq9_test.yaml</a>.</p></div><span>Tagged with: </span><ul class="tag-list"><li style="background-color: #254F9C;"><a href="/tags/esphome">ESPHome</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>